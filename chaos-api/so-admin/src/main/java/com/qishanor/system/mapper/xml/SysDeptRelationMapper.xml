<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qishanor.system.mapper.SysDeptRelationMapper">


    <!--删除部门 > 删除所有关联此部门子节点的闭包关系-->
    <delete id="deleteDeptRelationsByDeptId">
		DELETE
		FROM
		sys_dept_relation
		WHERE
		descendant IN (
		SELECT
		temp.descendant
		FROM
		(
		SELECT
		descendant
		FROM
		sys_dept_relation
		WHERE
		ancestor = #{id}
		) temp
		)
	</delete>
</mapper>


